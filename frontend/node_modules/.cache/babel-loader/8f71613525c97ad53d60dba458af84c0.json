{"ast":null,"code":"import _regeneratorRuntime from\"D:/AddSkill/react-and-node-apps/Nutrify/nutrify-new/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/AddSkill/react-and-node-apps/Nutrify/nutrify-new/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/AddSkill/react-and-node-apps/Nutrify/nutrify-new/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";var _this=this;import React,{useEffect,useState}from\"react\";import{useHistory}from\"react-router\";import{NavLink}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DeleteMeal=function DeleteMeal(){console.log('in home');var history=useHistory();// const [userData,setUserData]=useState({});\n// const [calData,setCalData]=useState(\"\");\nvar _useState=useState([{}]),_useState2=_slicedToArray(_useState,2),meals=_useState2[0],setMeals=_useState2[1];console.log(\"after useState\");useEffect(function(){// callHome();\nPostData();},[]);// const callHome= async ()=>{\n//     try {\n//         const res=await fetch('/todos/home',{\n//             method:'GET',\n//             headers:{\n//                 Accept:\"application/json\",\n//                 \"Content-Type\":\"application/json\"\n//             },\n//             credentials:\"include\"\n//         });\n//         const data= await res.json();\n//         console.log('user details ',data);\n//         setUserData(data);\n//     } catch (error) {\n//         console.log(error);\n//     }\n// }\nvar deleteMeal=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var id,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:id=e.target.value;_context.next=3;return fetch('/todos/deletemeal',{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({id:id})});case 3:res=_context.sent;case 4:case\"end\":return _context.stop();}}},_callee);}));return function deleteMeal(_x){return _ref.apply(this,arguments);};}();var PostData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var today,dd,mm,yyyy,res,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:today=new Date();dd=String(today.getDate()).padStart(2,'0');mm=String(today.getMonth()+1).padStart(2,'0');yyyy=today.getFullYear();today=yyyy+'-'+mm+'-'+dd;_context2.next=7;return fetch('/todos/fetchmeal',{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({date:today})});case 7:res=_context2.sent;_context2.next=10;return res.json();case 10:data=_context2.sent;if(data.error){alert(data.success);}else{console.log(\"in home mealsfetched\");setMeals(data.meals);console.log(data.meals);// history.push('/home');\n// let totcal=0\n// {data.meals.map((cal,index)=>{\n//      totcal+=parseInt(cal.calories);\n//         console.log(cal.calories) ;\n// })}\n// setCalData(totcal);\n// // console.log(calData);\n// // console.log(userData);\n// console.log('calorie',totcal);\n}case 12:case\"end\":return _context2.stop();}}},_callee2);}));return function PostData(_x2){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"user\",children:[/*#__PURE__*/_jsx(\"select\",{onChange:_this.deleteMeal,children:meals.map(function(meal,index){return/*#__PURE__*/_jsx(\"option\",{value:meal._id,style:{margin:\"auto\"},children:meal.mealname},meal._id);})}),\"\\xA0\",/*#__PURE__*/_jsx(\"br\",{})]});};export default DeleteMeal;","map":{"version":3,"sources":["D:/AddSkill/react-and-node-apps/Nutrify/nutrify-new/frontend/src/components/forms/deleteMeal.js"],"names":["React","useEffect","useState","useHistory","NavLink","DeleteMeal","console","log","history","meals","setMeals","PostData","deleteMeal","e","id","target","value","fetch","method","headers","body","JSON","stringify","res","today","Date","dd","String","getDate","padStart","mm","getMonth","yyyy","getFullYear","date","json","data","error","alert","success","map","meal","index","_id","margin","mealname"],"mappings":"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","sourcesContent":["import React,{ useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router\";\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nconst DeleteMeal=()=>{\r\n     console.log('in home');\r\n    const history=useHistory();\r\n    // const [userData,setUserData]=useState({});\r\n    // const [calData,setCalData]=useState(\"\");\r\n    const [meals,setMeals]=useState([{}]);\r\n    console.log(\"after useState\");\r\n    useEffect(()=>{\r\n        // callHome();\r\n        PostData();\r\n    },[]);\r\n  \r\n    \r\n    // const callHome= async ()=>{\r\n    //     try {\r\n    //         const res=await fetch('/todos/home',{\r\n    //             method:'GET',\r\n    //             headers:{\r\n                    \r\n    //                 Accept:\"application/json\",\r\n    //                 \"Content-Type\":\"application/json\"\r\n\r\n    //             },\r\n    //             credentials:\"include\"\r\n    //         });\r\n    //         const data= await res.json();\r\n    //         console.log('user details ',data);\r\n            \r\n    //         setUserData(data);\r\n    //     } catch (error) {\r\n    //         console.log(error);\r\n    //     }\r\n    // }\r\n    const deleteMeal= async (e)=>{\r\n        var id=e.target.value;\r\n        const res=await fetch('/todos/deletemeal',{\r\n            method:\"POST\",\r\n            headers:{\r\n                \"Content-Type\":\"application/json\"\r\n            },\r\n            body:JSON.stringify({\r\n                id\r\n            })\r\n        });\r\n    }\r\n    const PostData= async (e)=>{\r\n        \r\n        var today = new Date();\r\n            var dd = String(today.getDate()).padStart(2, '0');\r\n            var mm = String(today.getMonth() + 1).padStart(2, '0');\r\n            var yyyy = today.getFullYear();\r\n\r\n            today =  yyyy+ '-' + mm + '-' + dd ;\r\n        \r\n        const res=await fetch('/todos/fetchmeal',{\r\n            method:\"POST\",\r\n            headers:{\r\n                \"Content-Type\":\"application/json\"\r\n            },\r\n            body:JSON.stringify({\r\n                date:today\r\n            })\r\n        });\r\n        \r\n        const data=await res.json();\r\n        if (data.error) {\r\n            alert(data.success);\r\n        } else {\r\n            console.log(\"in home mealsfetched\");\r\n            setMeals(data.meals);\r\n            console.log(data.meals);\r\n            // history.push('/home');\r\n            // let totcal=0\r\n            // {data.meals.map((cal,index)=>{\r\n            //      totcal+=parseInt(cal.calories);\r\n            //         console.log(cal.calories) ;\r\n                \r\n            // })}\r\n            // setCalData(totcal);\r\n            // // console.log(calData);\r\n            // // console.log(userData);\r\n            // console.log('calorie',totcal);\r\n        }\r\n    }\r\n\r\n    return(\r\n        <div className=\"user\" >\r\n            {/* <h1 class=\"user__title\">Hello { userData.email}</h1>\r\n            <p>Max calories allowed: {userData.maxcal}</p>\r\n            <p>Calories Consumed: {calData}</p>\r\n        { parseInt(calData)>userData.maxcal?(<div className=\"background-red \">U are abouve ur limit</div>):(<div>u have {userData.maxcal-parseInt(calData)}  calories to go</div>)} */}\r\n        {/* <ul>{\r\n            meals.map((meal,index)=>{\r\n                return(<li>{meal.mealname}</li>)\r\n            } )\r\n        }</ul> */}\r\n        \r\n        \r\n                \r\n                \r\n                    <select onChange={this.deleteMeal}>\r\n                        { meals.map((meal,index)=>{\r\n                        return (\r\n                            <option value={meal._id} key={meal._id} style={{margin:\"auto\"}} >{meal.mealname}</option>\r\n                        \r\n                            )\r\n                        })}\r\n                    </select>&nbsp;\r\n                    <br></br>\r\n                    {/* <label>CurretTime:{currenttime}</label> */}\r\n            \r\n        </div>\r\n        )\r\n\r\n}\r\nexport default DeleteMeal;"]},"metadata":{},"sourceType":"module"}