{"ast":null,"code":"import _regeneratorRuntime from\"D:/AddSkill/react-and-node-apps/Nutrify/nutrify-new/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/AddSkill/react-and-node-apps/Nutrify/nutrify-new/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/AddSkill/react-and-node-apps/Nutrify/nutrify-new/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{useHistory}from\"react-router\";import{NavLink}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Showmeals=function Showmeals(){console.log('in home');var history=useHistory();// const [userData,setUserData]=useState({});\n// const [calData,setCalData]=useState(\"\");\nvar _useState=useState({}),_useState2=_slicedToArray(_useState,2),meals=_useState2[0],setMeals=_useState2[1];console.log(\"after useState\");useEffect(function(){// callHome();\nPostData();},[]);// const callHome= async ()=>{\n//     try {\n//         const res=await fetch('/todos/home',{\n//             method:'GET',\n//             headers:{\n//                 Accept:\"application/json\",\n//                 \"Content-Type\":\"application/json\"\n//             },\n//             credentials:\"include\"\n//         });\n//         const data= await res.json();\n//         console.log('user details ',data);\n//         setUserData(data);\n//     } catch (error) {\n//         console.log(error);\n//     }\n// }\nvar PostData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var today,dd,mm,yyyy,res,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:today=new Date();dd=String(today.getDate()).padStart(2,'0');mm=String(today.getMonth()+1).padStart(2,'0');yyyy=today.getFullYear();today=yyyy+'-'+mm+'-'+dd;_context.next=7;return fetch('/todos/fetchmeal',{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({date:today})});case 7:res=_context.sent;_context.next=10;return res.json();case 10:data=_context.sent;if(data.error){alert(data.success);}else{console.log(\"in home mealsfetched\");setMeals(data);console.log(data.meals);// history.push('/home');\n// let totcal=0\n// {data.meals.map((cal,index)=>{\n//      totcal+=parseInt(cal.calories);\n//         console.log(cal.calories) ;\n// })}\n// setCalData(totcal);\n// // console.log(calData);\n// // console.log(userData);\n// console.log('calorie',totcal);\n}case 12:case\"end\":return _context.stop();}}},_callee);}));return function PostData(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"user\",children:[/*#__PURE__*/_jsx(\"ul\",{children:meals.meals.map(function(meal,index){return/*#__PURE__*/_jsx(\"li\",{children:meal.mealname});})}),/*#__PURE__*/_jsx(\"form\",{className:\"form\",children:/*#__PURE__*/_jsx(\"div\",{className:\"form__group\",children:/*#__PURE__*/_jsx(NavLink,{to:\"/createmeal\",activeClassName:\"active\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn\",type:\"button\",children:\"Create Meal\"})})})}),/*#__PURE__*/_jsx(\"form\",{className:\"form\",children:/*#__PURE__*/_jsx(\"div\",{className:\"form__group\",children:/*#__PURE__*/_jsx(NavLink,{to:\"/createmeal\",activeClassName:\"active\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn\",type:\"button\",children:\"Create Meal\"})})})}),/*#__PURE__*/_jsx(\"form\",{className:\"form\",children:/*#__PURE__*/_jsx(\"div\",{className:\"form__group\",children:/*#__PURE__*/_jsx(NavLink,{to:\"/createmeal\",activeClassName:\"active\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn\",type:\"button\",children:\"Create Meal\"})})})}),/*#__PURE__*/_jsx(\"a\",{href:\"/todos/updatemeal\",children:\"Update Meal\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"a\",{href:\"/todos/deletemeal\",children:\"Delete Meal\"}),/*#__PURE__*/_jsx(\"br\",{})]});};export default Showmeals;","map":{"version":3,"sources":["D:/AddSkill/react-and-node-apps/Nutrify/nutrify-new/frontend/src/components/forms/showMeals.js"],"names":["React","useEffect","useState","useHistory","NavLink","Showmeals","console","log","history","meals","setMeals","PostData","e","today","Date","dd","String","getDate","padStart","mm","getMonth","yyyy","getFullYear","fetch","method","headers","body","JSON","stringify","date","res","json","data","error","alert","success","map","meal","index","mealname"],"mappings":"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","sourcesContent":["import React,{ useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router\";\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nconst Showmeals=()=>{\r\n     console.log('in home');\r\n    const history=useHistory();\r\n    // const [userData,setUserData]=useState({});\r\n    // const [calData,setCalData]=useState(\"\");\r\n    const [meals,setMeals]=useState({});\r\n    console.log(\"after useState\");\r\n    useEffect(()=>{\r\n        // callHome();\r\n        PostData();\r\n    },[]);\r\n  \r\n    \r\n    // const callHome= async ()=>{\r\n    //     try {\r\n    //         const res=await fetch('/todos/home',{\r\n    //             method:'GET',\r\n    //             headers:{\r\n                    \r\n    //                 Accept:\"application/json\",\r\n    //                 \"Content-Type\":\"application/json\"\r\n\r\n    //             },\r\n    //             credentials:\"include\"\r\n    //         });\r\n    //         const data= await res.json();\r\n    //         console.log('user details ',data);\r\n            \r\n    //         setUserData(data);\r\n    //     } catch (error) {\r\n    //         console.log(error);\r\n    //     }\r\n    // }\r\n\r\n    const PostData= async (e)=>{\r\n        \r\n        var today = new Date();\r\n            var dd = String(today.getDate()).padStart(2, '0');\r\n            var mm = String(today.getMonth() + 1).padStart(2, '0');\r\n            var yyyy = today.getFullYear();\r\n\r\n            today =  yyyy+ '-' + mm + '-' + dd ;\r\n        \r\n    const res=await fetch('/todos/fetchmeal',{\r\n        method:\"POST\",\r\n        headers:{\r\n            \"Content-Type\":\"application/json\"\r\n        },\r\n        body:JSON.stringify({\r\n            date:today\r\n        })\r\n    });\r\n    \r\n    const data=await res.json();\r\n    if (data.error) {\r\n        alert(data.success);\r\n    } else {\r\n        console.log(\"in home mealsfetched\");\r\n        setMeals(data);\r\n        console.log(data.meals);\r\n        // history.push('/home');\r\n        // let totcal=0\r\n        // {data.meals.map((cal,index)=>{\r\n        //      totcal+=parseInt(cal.calories);\r\n        //         console.log(cal.calories) ;\r\n            \r\n        // })}\r\n        // setCalData(totcal);\r\n        // // console.log(calData);\r\n        // // console.log(userData);\r\n        // console.log('calorie',totcal);\r\n    }\r\n}\r\n\r\n    return(\r\n        <div className=\"user\" >\r\n            {/* <h1 class=\"user__title\">Hello { userData.email}</h1>\r\n            <p>Max calories allowed: {userData.maxcal}</p>\r\n            <p>Calories Consumed: {calData}</p>\r\n        { parseInt(calData)>userData.maxcal?(<div className=\"background-red \">U are abouve ur limit</div>):(<div>u have {userData.maxcal-parseInt(calData)}  calories to go</div>)} */}\r\n        <ul>{\r\n            meals.meals.map((meal,index)=>{\r\n                return(<li>{meal.mealname}</li>)\r\n            } )\r\n        }</ul>\r\n        \r\n        \r\n        <form className=\"form\">\r\n            <div className=\"form__group\">\r\n            <NavLink to=\"/createmeal\" activeClassName=\"active\">\r\n                <button className=\"btn\" type=\"button\" >Create Meal</button>\r\n            </NavLink></div>\r\n        </form>\r\n        <form className=\"form\">\r\n            <div className=\"form__group\">\r\n            <NavLink to=\"/createmeal\" activeClassName=\"active\">\r\n                <button className=\"btn\" type=\"button\" >Create Meal</button>\r\n            </NavLink></div>\r\n        </form>\r\n        <form className=\"form\">\r\n            <div className=\"form__group\">\r\n            <NavLink to=\"/createmeal\" activeClassName=\"active\">\r\n                <button className=\"btn\" type=\"button\" >Create Meal</button>\r\n            </NavLink></div>\r\n        </form>\r\n\r\n\r\n        <a href=\"/todos/updatemeal\">Update Meal</a><br></br>\r\n        <a href=\"/todos/deletemeal\">Delete Meal</a><br></br>\r\n        </div>\r\n        )\r\n\r\n}\r\nexport default Showmeals;"]},"metadata":{},"sourceType":"module"}