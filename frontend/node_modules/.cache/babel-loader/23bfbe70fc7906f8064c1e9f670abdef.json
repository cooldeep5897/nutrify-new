{"ast":null,"code":"import _regeneratorRuntime from\"D:/AddSkill/react-and-node-apps/Nutrify/nutrify-new/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/AddSkill/react-and-node-apps/Nutrify/nutrify-new/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/AddSkill/react-and-node-apps/Nutrify/nutrify-new/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{useHistory}from\"react-router\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var Home=function Home(){console.log('in home');var history=useHistory();var _useState=useState({}),_useState2=_slicedToArray(_useState,2),userData=_useState2[0],setUserData=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),calData=_useState4[0],setCalData=_useState4[1];useEffect(function(){callHome();PostData();},[]);var callHome=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch('/todos/home',{method:'GET',headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\"},credentials:\"include\"});case 3:res=_context.sent;_context.next=6;return res.json();case 6:data=_context.sent;console.log('user details ',data);setUserData(data);_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function callHome(){return _ref.apply(this,arguments);};}();var PostData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var today,dd,mm,yyyy,res,data,totcal;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:today=new Date();dd=String(today.getDate()).padStart(2,'0');mm=String(today.getMonth()+1).padStart(2,'0');yyyy=today.getFullYear();today=yyyy+'-'+mm+'-'+dd;_context2.next=7;return fetch('/todos/fetchmeal',{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({date:today})});case 7:res=_context2.sent;_context2.next=10;return res.json();case 10:data=_context2.sent;if(data.error){alert(data.success);}else{console.log(\"in home mealsfetched\");console.log(data.meals);// history.push('/home');\ntotcal=0;totcal+=parseInt(data.meals.map(function(cal,index){return cal.calories;}));console.log('calorie',totcal);}case 12:case\"end\":return _context2.stop();}}},_callee2);}));return function PostData(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"user\",children:[/*#__PURE__*/_jsxs(\"h1\",{class:\"user__title\",children:[\"Hello \",userData.email]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Max calories allowed: \",userData.maxcal]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"p\",{children:\"Calories Consumed\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"a\",{href:\"/createmeal\",children:\"Create Meal \"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"a\",{href:\"/todos/updatemeal\",children:\"Update Meal\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"a\",{href:\"/todos/deletemeal\",children:\"Delete Meal\"}),/*#__PURE__*/_jsx(\"br\",{})]});};export default Home;","map":{"version":3,"sources":["D:/AddSkill/react-and-node-apps/Nutrify/nutrify-new/frontend/src/components/forms/home.js"],"names":["React","useEffect","useState","useHistory","Home","console","log","history","userData","setUserData","calData","setCalData","callHome","PostData","fetch","method","headers","Accept","credentials","res","json","data","e","today","Date","dd","String","getDate","padStart","mm","getMonth","yyyy","getFullYear","body","JSON","stringify","date","error","alert","success","meals","totcal","parseInt","map","cal","index","calories","email","maxcal"],"mappings":"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","sourcesContent":["import React,{ useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router\";\r\n\r\nconst Home=()=>{\r\n     console.log('in home');\r\n    const history=useHistory();\r\n    const [userData,setUserData]=useState({});\r\n    const [calData,setCalData]=useState({});\r\n    useEffect(()=>{\r\n        callHome();\r\n        PostData();\r\n    },[]);\r\n  \r\n    \r\n    const callHome= async ()=>{\r\n        try {\r\n            const res=await fetch('/todos/home',{\r\n                method:'GET',\r\n                headers:{\r\n                    \r\n                    Accept:\"application/json\",\r\n                    \"Content-Type\":\"application/json\"\r\n\r\n                },\r\n                credentials:\"include\"\r\n            });\r\n            const data= await res.json();\r\n            console.log('user details ',data);\r\n            \r\n            setUserData(data);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n\r\n    const PostData= async (e)=>{\r\n        \r\n        var today = new Date();\r\n            var dd = String(today.getDate()).padStart(2, '0');\r\n            var mm = String(today.getMonth() + 1).padStart(2, '0');\r\n            var yyyy = today.getFullYear();\r\n\r\n            today =  yyyy+ '-' + mm + '-' + dd ;\r\n        \r\n    const res=await fetch('/todos/fetchmeal',{\r\n        method:\"POST\",\r\n        headers:{\r\n            \"Content-Type\":\"application/json\"\r\n        },\r\n        body:JSON.stringify({\r\n            date:today\r\n        })\r\n    });\r\n    \r\n    const data=await res.json();\r\n    if (data.error) {\r\n        alert(data.success);\r\n    } else {\r\n        console.log(\"in home mealsfetched\");\r\n        console.log(data.meals);\r\n        // history.push('/home');\r\n        var totcal=0\r\n        totcal+= parseInt(data.meals.map((cal,index)=>{\r\n            return(cal.calories)\r\n        }))\r\n        console.log('calorie',totcal);\r\n    }\r\n}\r\n\r\n    return(\r\n        <div className=\"user\" >\r\n            <h1 class=\"user__title\">Hello { userData.email}</h1>\r\n            <p>Max calories allowed: {userData.maxcal}</p><br></br>\r\n            <p>Calories Consumed</p>\r\n        <br></br>\r\n        <a href=\"/createmeal\">Create Meal </a><br></br>\r\n        <a href=\"/todos/updatemeal\">Update Meal</a><br></br>\r\n        <a href=\"/todos/deletemeal\">Delete Meal</a><br></br>\r\n        </div>\r\n        )\r\n\r\n}\r\nexport default Home;"]},"metadata":{},"sourceType":"module"}